# Project Todo List

Current item being worked on: Updating plan with remote DB clarification for development connections.

- [x] Discuss and decide frontend framework (Astro vs. Next.js): Review pros/cons, confirm choice (Astro for performance on static content with islands)
- [x] Update PROJECT_ROADMAP.md with chosen framework and rationale (AstroJS frontend, islands for dynamics; edit file to reflect)
- [x] Gather historical context for Heavenletters.org (Collect details on origins, evolution, key milestones to inform VMA and design decisions)
- [x] Create and refine Project VMA document (Draft VMA.md with vision/mission/aims; incorporate historical context from user, review/approve, then finalize file)
- [x] User review/approval of HISTORY.md and VMA.md (Feedback on summaries and integration; make final tweaks if needed)
- [x] Integrate future vision into VMA and roadmap (Update VMA.md with promise to Gloria, sustainability goals [ebooks multilingual, subscriptions, premium content via Stripe]; add to PROJECT_ROADMAP.md as Phase 3.5; note Godwriting workshop as separate project on godwriting.org)
- [x] Adjust plan for new requirements (Update schema/routing for permalinks [English: /slug.html from title+publish_number; translations: /[locale]/slug.html]; add LLM-moderated comments, semantic LLM search with indexing/tags; post-launch subscriber forum; remove Godwriting workshop from this scope)
- [x] Simplify MVP for clean UI and full HL availability (Defer full LLM/comments/ebooks/subscriptions/forum to post-MVP; focus Phase 3 on minimal Tailwind UI, basic keyword search, permalink routes, ensure 100% of 6,620 HL migration/access; optional subdomain i18n; LLM backend prep in Phase 2)
- [x] Add DB preservation and remote server notes (Explicitly state MariaDB at 192.168.8.103:3306 for all dev connections; ks_ prefix, no drops/alters to existing 'heaven' schema)
- [ ] Final plan approval (Confirm roadmap v2.8 with remote DB for dev, 6,620 HLs, LLM prep, simplified MVP; proceed to Code mode for Phase 2.1 if ready)
- [ ] Phase 2.1: Install KeystoneJS 6 in backend/ (npm create keystone-app backend --with-prisma; configure MySQL connection to remote server 192.168.8.103:3306 with ks_ prefix for dev; add deps for OpenAI/HuggingFace LLM indexing)
- [ ] Phase 2.2: Define Keystone schema (Lists: Heavenletter [nid, title, publish_number: Int (unique ID), body, locale, published_on: DateTime, written_on: DateTime, slug: String (permalink from title), translations: Relation, tags: Json (LLM classifiers), embeddings: Json (semantic vectors)]; User for basic auth/volunteers)
- [ ] Phase 2.3: Build data sync script (Node.js/Prisma: Connect to remote DB for dev; Query Drupal GraphQL, bulk insert all 6,620 heavenletters to ks_ tables; generate slugs for English/translations; map dates; integrate LLM indexing (OpenAI/HuggingFace API for tags/embeddings on body/title, store in fields); validate full availability/UTF-8)
- [ ] Phase 2.4: Configure Keystone GraphQL (Queries for HLs by slug/locale/publish_number/tags/embeddings similarity; basic auth for /admin; test sync/CRUD/indexing on ks_ tables, remote connection)
- [ ] Phase 3.1: Initialize AstroJS project in frontend/ (astro new frontend --template minimal; add Tailwind for clean/minimal UI, @astrojs/mdx, basic i18n path-based)
- [ ] Phase 3.2: Develop core components (Static MDX viewer with clean design; basic keyword search via GraphQL + tag filter from LLM prep; simple language selector)
- [ ] Phase 3.3: Implement pages/routes (SSG homepage/archive listing all 6,620 HLs; dynamic /[slug].html (English), /[locale]/[slug].html (translations); clean navigation/SEO with permalinks; optional subdomain config)
- [ ] Phase 3.4: Integrate basic features (RSS per language; social meta; fallback Drupal GraphQL; ensure full HL accessibility via search/archive/tags)
- [ ] Phase 4.1: End-to-end integration (Astro fetches Keystone for content/search/tags; caching; test permalink resolution/availability/embeddings)
- [ ] Phase 4.2: Testing suite (Parity vs. Drupal for content/permalinks; E2E Playwright for UI/routes/basic search; accessibility for clean UI; confirm all 6,620 HLs load; spot-check LLM tags; verify remote DB unchanged)
- [ ] Phase 4.3: Optimization (DB indexes on ks_ tables for slug/publish_number/locale/tags; Astro builds for performance; UI refinements for readability/simplicity; LLM indexing batch efficiency)
- [ ] Phase 5.1: Production infra (Netlify/Vercel for Astro deploys with path i18n; Railway for Keystone connecting to remote DB 192.168.8.103:3306; env vars for DB/OpenAI for indexing)
- [ ] Phase 5.2: CI/CD (GitHub Actions: Build/test/deploy; sync/index trigger on ks_ tables, remote connection)
- [ ] Phase 5.3: Launch (Full sync/index to ks_ on remote; 301 redirects from Drupal; monitor availability/UI/index with Sentry; confirm Drupal data preserved)
- [ ] Post-MVP: Full LLM semantic search (Natural language queries with embeddings/tags via OpenAI/HuggingFace in frontend)
- [ ] Post-MVP: Implement LLM-moderated comments (Add Comments schema/mutations; moderate with GPT-3.5)
- [ ] Post-MVP: Sustainability features (Ebooks PDF/EPUB exports; subscriptions/premium with Stripe)
- [ ] Post-MVP: Subscriber forum (Discourse/Keystone for paid conversations)
- [ ] Post-MVP: Optional subdomain i18n (Full hosting setup if needed)
- [ ] Post-launch: Decommission plan (Archive Drupal; quarterly reviews, track metrics [traffic, search usage])